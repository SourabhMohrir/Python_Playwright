pipeline {
  agent any

  parameters {
    choice(name: 'SUITE', choices: "API\nregression", description: 'Select test suite')
  }

  environment {
    // Store your Jenkins credentials beforehand under this ID
    USER_EMAIL_1 = credentials('playwright-user')
    USER_PASSWORD_1 = credentials('playwright-user')
  }

  stages {
    stage('Run Tests') {
      steps {
        sh 'ci/run_tests.sh'
      }
    }
  }

  post {
    always {
      archiveArtifacts artifacts: 'playwright-report/**/*', allowEmptyArchive: true
    }
  }
}